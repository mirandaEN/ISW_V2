/* =================================================== */
/* --- 00. ESTILOS BASE (MODO CLARO) UNIFICADOS --- */
/* =================================================== */

/* 1. Fondo de Body (Modo Claro) */
body {
    background: linear-gradient(135deg, #f9caff 0%, #8c6d8e 100%) fixed;
    background-attachment: fixed;
    color: #292129;
}

/* 2. Navbar (Modo Claro) */
.navbar-custom-guindo {
    background-color: rgba(255, 255, 255, 0.7); /* Fondo traslúcido */
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
}
.navbar-custom-guindo .navbar-brand,
.navbar-custom-guindo .nav-link:not(.active) { /* <-- ¡CAMBIO IMPORTANTE AQUÍ! */
    color: #333; 
}
.navbar-custom-guindo .nav-link:hover {
    color: #000;
}
.navbar-custom-guindo .nav-link.active {
    font-weight: 600;
    color: #6a5acd; /* Acento morado */
    border-bottom: 2px solid #6a5acd; 
}
.navbar-custom-guindo .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(0, 0, 0, 0.7)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* 3. Tarjetas (Modo Claro) */
.card,
main#gestionDanosContent, /* Para gestion_danos */
main#soporteContent .container /* Para soporte */
{
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

/* 4. Tablas (Modo Claro) */
.table th {
    background-color: rgba(0, 0, 0, 0.03);
    color: #333;
}
.table td {
    vertical-align: middle;
}

/* 5. Modales (Modo Claro) */
.modal-content {
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 16px;
}

/* 6. Contenedor de Flashes */
.flash-messages-container-local {
    max-width: 1400px;
    margin: 20px auto 0 auto;
    padding: 0 0.75rem; /* Alinea con el padding de Bootstrap */
}

/* --- FIN DE ESTILOS BASE --- */
/* =================================================== */
/* --- TEMA CLARO (POR DEFECTO) --- */
/* =================================================== */

/* 1. Fondo Claro y Tipografía Base */
body {
    background: linear-gradient(135deg, #ffe6e6 0%, #e6e6e6 100%) fixed;
    color: #212529; /* Texto oscuro */
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

.dashboard-v2-container {
    width: 90%;
    max-width: 1300px;
    margin: 40px auto;
    padding: 20px;
}

/* 2. Barra Superior (Navbar Clara) */
.admin-top-bar {
    padding: 10px 0;
    background-color: rgba(255, 255, 255, 0.7); /* Vidrio esmerilado claro */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px); /* Para Safari */
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 12px;
    margin-bottom: 20px; /* Separación */
}

.admin-brand {
    display: flex;
    align-items: center;
    gap: 12px;
}
.labflow-logo {
    height: 75px; 
    width: auto;
}
.admin-brand h1 {
    font-size: 1.5em;
    font-weight: 600;
    color: #333; /* Texto oscuro */
    margin: 0;
}
.admin-brand h1 i {
    margin-right: 8px;
    color: #6a5acd; /* Acento morado */
}

/* 3. Acciones de Usuario (Claro) */
.admin-user-actions {
    gap: 20px;
    margin-right: 15px;
}
.profile-container {
    position: relative;
}
.profile-bubble {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid rgba(0, 0, 0, 0.2);
    transition: border-color 0.2s;
    background-color: rgba(0, 0, 0, 0.05);
    display: flex;
    align-items: center;
    justify-content: center;
}
.profile-bubble:hover {
    border-color: #6a5acd;
}
.profile-bubble img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
#profile-upload { display: none; }

.btn-logout-v2 {
    color: #333;
    text-decoration: none;
    font-size: 0.9em;
    font-weight: 500;
    padding: 8px 12px;
    border-radius: 5px;
    background-color: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0, 0, 0, 0.1);
    transition: background-color 0.2s;
}
.btn-logout-v2:hover {
    background-color: rgba(0, 0, 0, 0.1);
    color: #000;
}

/* 4. Layout y Bienvenida (Claro) */
.dashboard-body {
    display: flex;
    gap: 30px;
    align-items: flex-start;
}
.main-content {
    flex-grow: 1;
    margin-top: 0;
}
.institute-header {
    text-align: center;
    margin-bottom: 20px;
    color: #555;
}
.institute-header img { height: 70px; margin-bottom: 10px; }
.institute-header h3 {
    font-size: 1.3em;
    font-weight: 400;
    margin: 0;
    color: #555;
}
.welcome-message {
    margin-bottom: 40px;
}
.welcome-message h2 {
    font-size: 2.5em;
    font-weight: 700;
    color: #333;
    margin: 0 0 5px 0;
}
.welcome-message p {
    font-size: 1.2em;
    color: #777;
    margin: 0;
}

/* 5. Grid de Botones (Claro) */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px;
}
.grid-button {
    background: rgba(255, 255, 255, 0.7); /* Vidrio esmerilado claro */
    border: 1px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 16px;
    padding: 25px;
    color: #333;
    text-decoration: none;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 160px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}
.grid-button:hover {
    background: rgba(255, 255, 255, 0.9);
    border-color: rgba(0, 0, 0, 0.1);
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
}
.grid-button i {
    font-size: 2.5em;
    margin-bottom: 15px;
    display: block;
    color: #6a5acd; /* Acento morado */
}
.grid-button span {
    font-size: 1.2em;
    font-weight: 600;
    color: #222;
    text-align: center;
}

/* 6. Sidebar y Calendario (Claro) */
.sidebar-content {
    flex-basis: 320px;
    flex-shrink: 0;
    margin-top: 0;
}
.calendar-widget {
    background-color: rgba(255, 255, 255, 0.7); /* Vidrio claro */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    padding: 20px;
    color: #333;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}
.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}
.calendar-header h4 {
    font-size: 1.2em;
    font-weight: 500;
    margin: 0;
    color: #333;
}
.calendar-nav button {
    background: none;
    border: none;
    color: #555;
    font-size: 1.2em;
    cursor: pointer;
    transition: color 0.2s;
}
.calendar-nav button:hover {
    color: #000;
}
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
}
.calendar-grid div {
    text-align: center;
    padding: 8px 0;
    font-size: 0.9em;
}
.calendar-day-header {
    font-weight: 600;
    color: #777;
    font-size: 0.8em;
}
.calendar-day {
    color: #333;
    cursor: pointer;
    border-radius: 50%;
    transition: background-color 0.2s;
}
.calendar-day:hover {
    background-color: rgba(0, 0, 0, 0.1);
}
.calendar-day.today {
    background-color: #6a5acd; /* Acento morado */
    font-weight: 700;
    color: #fff;
}
.calendar-day.other-month {
    color: #ccc;
    cursor: default;
}
.calendar-day.other-month:hover {
    background: none;
}




/* =================================================== */
/* --- 7b. CHATBOT (MODO OSCURO - ESTILO MODERNO) --- */
/* =================================================== */

/* --- Ventana Principal (Estilo "Glassmorphism") --- */
body.dark-mode .chat-window {
    background-color: rgba(20, 20, 35, 0.85); /* Fondo oscuro muy traslúcido */
    backdrop-filter: blur(15px); /* Efecto vidrio esmerilado */
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.1); /* Borde sutil */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); /* Sombra más pronunciada */
}

/* --- Cabecera --- */
body.dark-mode .chat-header {
    background-color: transparent; /* Fondo transparente */
    border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Línea divisoria sutil */
    color: #f0f0f0; /* Texto claro */
}
body.dark-mode #chat-close-btn {
    color: #aaa;
}
body.dark-mode #chat-close-btn:hover {
    color: #fff;
}

/* --- Cuerpo del Chat --- */
body.dark-mode .chat-body {
    background-color: transparent; /* Transparente, usa el fondo de .chat-window */
}

/* --- Mensajes del Bot (Modo Oscuro) --- */
body.dark-mode .chat-message.bot i {
    background-color: #6a5acd; /* Icono morado (se mantiene) */
    color: #fff;
}
body.dark-mode .chat-message.bot span {
    background-color: #2a2a45; /* Burbuja de texto oscura */
    color: #f0f0f0;
}

/* --- Mensajes del Usuario (Modo Oscuro) --- */
body.dark-mode .chat-message.user i {
    background-color: #444; /* Icono gris oscuro */
    color: #fff;
}
body.dark-mode .chat-message.user span {
    background-color: #6a5acd; /* Burbuja de usuario morada (se mantiene) */
    color: white;
}

/* --- Footer (Input) --- */
body.dark-mode .chat-footer {
    background-color: rgba(0, 0, 0, 0.2); /* Fondo de input traslúcido */
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}
body.dark-mode #chat-input {
    background-color: rgba(255, 255, 255, 0.05); /* Input muy sutil */
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #fff;
}
body.dark-mode #chat-input::placeholder {
    color: #888;
}
body.dark-mode #chat-input:focus {
    border-color: #6a5acd; /* Resalta en morado al hacer foco */
    box-shadow: 0 0 0 2px rgba(106, 90, 205, 0.3);
}

/* --- Botón de Enviar --- */
body.dark-mode #chat-send-btn {
    background-color: #6a5acd; /* Morado */
}
body.dark-mode #chat-send-btn:hover {
    background-color: #7b68ee; /* Morado más claro */
}
/* 8. Estilos de Modales (Claro) */
#inactivityModal .modal-header { 
    background-color: #ffc107; 
    color: #333; 
}

/* 9. Responsivo */
@media (max-width: 992px) {
    .dashboard-body {
        flex-direction: column;
        gap: 10px;
    }
    .sidebar-content {
        flex-basis: auto;
        width: 100%;
        margin-top: 10px;
    }
}


/* =================================================== */
/* --- TEMA OSCURO (MODO NOCHE) --- */
/* =================================================== */

body.dark-mode {
    background-color: #1e1e2f;
    background-image: radial-gradient(circle at 10% 20%, rgba(100, 100, 200, 0.2), transparent 50%),
                      radial-gradient(circle at 80% 70%, rgba(200, 100, 150, 0.15), transparent 50%);
    background-attachment: fixed;
    color: #f0f0f0;
}

/* Barra superior oscura */
body.dark-mode .admin-top-bar {
    padding: 10px 0;
    background-color: transparent; /* El original no tenía fondo */
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 0;
    margin-bottom: 30px; /* Margen original */
}
body.dark-mode .admin-brand h1 {
    color: #fff;
}
body.dark-mode .admin-brand h1 i {
    color: rgba(255, 255, 255, 0.8);
}

/* Acciones de usuario oscuras */
body.dark-mode .profile-bubble {
    border: 2px solid rgba(255, 255, 255, 0.5);
    background-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode .profile-bubble:hover {
    border-color: #fff;
}

body.dark-mode .btn-logout-v2 {
    color: #fff;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255,255,255,0.2);
}
body.dark-mode .btn-logout-v2:hover {
    background-color: rgba(255, 255, 255, 0.2);
    color: #fff;
}

/* Contenido principal oscuro */
body.dark-mode .main-content {
     margin-top: 30px; /* Margen original */
}
body.dark-mode .institute-header {
     margin-bottom: 20px;
     color: #fff;
}
body.dark-mode .institute-header h3 {
     color: rgba(255, 255, 255, 0.9);
}
body.dark-mode .welcome-message {
    margin-bottom: 40px;
}
body.dark-mode .welcome-message h2 {
    color: #fff;
}
body.dark-mode .welcome-message p {
    color: #a0a0b0; /* Gris-azulado claro */
}

/* Grid de botones oscuro (Glassmorphism) */
body.dark-mode .grid-button {
    background: rgba(40, 40, 60, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 15px;
    color: #f0f0f0;
    box-shadow: none; /* Sin sombra en oscuro */
}
body.dark-mode .grid-button:hover {
    background: rgba(50, 50, 80, 0.6);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
}
body.dark-mode .grid-button i {
    color: #fff;
}
body.dark-mode .grid-button span {
    color: #fff;
}

/* Sidebar oscuro */
body.dark-mode .sidebar-content {
     margin-top: 30px; /* Margen original */
}
body.dark-mode .calendar-widget {
    background-color: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 20px;
    color: #fff;
    border: none; /* Sin borde en oscuro */
    box-shadow: none;
    backdrop-filter: blur(10px); /* Mantener el blur */
    -webkit-backdrop-filter: blur(10px);
}
body.dark-mode .calendar-header h4 {
    color: #fff;
}
body.dark-mode .calendar-nav button {
    color: rgba(255, 255, 255, 0.7);
}
body.dark-mode .calendar-nav button:hover {
    color: #fff;
}
body.dark-mode .calendar-day-header {
    color: rgba(255, 255, 255, 0.5);
}
body.dark-mode .calendar-day {
    color: rgba(255, 255, 255, 0.8);
}
body.dark-mode .calendar-day:hover {
    background-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode .calendar-day.today {
    background-color: #6a5acd;
    color: #fff;
}
body.dark-mode .calendar-day.other-month {
    color: rgba(255, 255, 255, 0.3);
}


/* =================================================== */
/* --- 10. ESTILOS DEL MENÚ FLOTANTE DE AJUSTES (FAB) --- */
/* =================================================== */

.settings-fab-menu {
    position: fixed;
    bottom: 30px;
    left: 30px; /* Lo ponemos en la esquina opuesta al chatbot */
    z-index: 1040;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.settings-options {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px; /* Separación entre bolitas */
    margin-bottom: 12px;
}

/* Estilo de todas las "bolitas" */
.settings-main-btn,
.settings-option {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    text-decoration: none; /* Para los enlaces <a> */
}

/* Botón principal (Engrane) */
.settings-main-btn {
    background-color: #6a5acd; /* Morado (en modo claro) */
    color: white;
    z-index: 2; /* Siempre encima de las opciones */
}
.settings-main-btn:hover {
    transform: rotate(45deg); /* Gira al pasar el mouse */
}

/* Opciones (Luna, Perfil, Logout) */
.settings-option {
    background-color: #f4f6fc; /* Fondo claro */
    color: #333; /* Icono oscuro */
    transform: scale(0); /* Ocultas por defecto */
    transform-origin: bottom center;
}
.settings-option:hover {
    background-color: #e9eaf0;
    transform: scale(1.1); /* Lindo efecto al pasar el mouse */
}

/* --- La Magia de la Animación --- */

/* Cuando el menú está activo, muestra las opciones */
.settings-fab-menu.active .settings-option {
    transform: scale(1);
}

/* Hacemos que aparezcan una por una */
.settings-fab-menu.active .settings-option:nth-child(1) {
    transition-delay: 0.3s; /* (Modo Noche) */
}
.settings-fab-menu.active .settings-option:nth-child(2) {
    transition-delay: 0.2s; /* (Idioma) */
}
.settings-fab-menu.active .settings-option:nth-child(3) {
    transition-delay: 0.1s; /* (Perfil) */
}
.settings-fab-menu.active .settings-option:nth-child(4) {
    transition-delay: 0.0s; /* (Logout) */
}
/* --- ESTILOS PARA MODO NOCHE --- */

/* Ajusta los colores del menú flotante en modo noche */
body.dark-mode .settings-main-btn {
    background-color: #f0f0f0; /* Botón principal claro */
    color: #1e1e2f; /* Icono oscuro */
}

body.dark-mode .settings-option {
    background-color: #2a2a45; /* Fondo oscuro de bolita */
    color: #f0f0f0; /* Icono claro */
    border: 1px solid rgba(255, 255, 255, 0.1);
}
body.dark-mode .settings-option:hover {
    background-color: #3a3a5a;
}
/* =================================================== */
/* --- 19. ESTILOS COMPLETOS: PRESTAMOS.HTML --- */
/* =================================================== */

/* --- 19a. Prestamos (Light Mode) --- */

.main-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1.5rem;
}
/* Título "Registro y Gestión de Préstamos" */
.main-title {
   font-weight: 700;
   color: #333; /* Texto oscuro */
   font-size: 1.8em;
   margin-bottom: 1.5rem;
   border-bottom: 2px solid rgba(0, 0, 0, 0.1); /* Borde sutil */
   padding-bottom: 10px;
   text-align: left;
}
/* Tarjetas (Light Mode) */
.card-section {
   background-color: rgba(255, 255, 255, 0.7); /* Fondo traslúcido */
   backdrop-filter: blur(10px);
   border: 1px solid rgba(255, 255, 255, 0.3); /* Borde sutil */
   border-radius: 16px;
   padding: 20px;
   box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
   height: 100%;
   margin-bottom: 1.5rem;
}
/* Títulos de tarjeta (Light Mode) */
.card-section h5, .card-section h4 {
   font-weight: 600;
   color: #333;
}
.card-section hr {
   border-top: 1px solid rgba(0, 0, 0, 0.1);
}
/* Formularios (Light Mode) */
.form-group { margin-bottom: 15px; }
.form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
.form-group input, .form-group textarea, .form-group select { 
   width: 100%; padding: 8px; box-sizing: border-box; 
   border: 1px solid #ced4da; border-radius: 4px; 
}
/* Botón "Registrar Préstamo" (Light Mode) */
.btn-principal {
   background-color: #480a23 !important; /* Guindo oscuro */
   border-color: #480a23 !important;
   color: white !important;
   padding: 0.75rem 1.25rem;
   font-size: 1rem;
   font-weight: 600;
   width: 100%;
}
.btn-principal:hover {
   background-color: #a71d2a !important;
   border-color: #a71d2a !important;
}
/* Lista de materiales seleccionados (Light Mode) */
#listaMaterialSeleccionado {
   border: 1px dashed #ccc;
   background-color: rgba(0, 0, 0, 0.03);
}
#listaMaterialSeleccionado li {
   display: flex; justify-content: space-between; align-items: center;
   padding: 8px; border-bottom: 1px solid #ddd;
}
/* Tabla de materiales (Light Mode) */
.materials-table-container { 
   max-height: 380px; 
   overflow-y: auto; 
   border: 1px solid rgba(0, 0, 0, 0.1);
   border-radius: .25rem; 
}
.status-badge { 
   display: inline-block; padding: 0.35em 0.65em; font-size: .75em; 
   font-weight: 700; line-height: 1; color: #fff; text-align: center; 
   border-radius: 50rem; 
}
.status-badge.activo { background-color: #28a745; }
.error-message { color: #dc3545; font-size: 0.875em; margin-top: 0.25rem; display: none; }
input.invalid + .error-message, input:invalid + .error-message { display: block; }
input.invalid, input:invalid { border-color: #dc3545; }

/* Filtros (Light Mode) */
.filter-container { 
   display: flex; gap: 15px; margin-bottom: 1rem; flex-wrap: wrap; 
   padding: 10px; background-color: rgba(0, 0, 0, 0.03); border-radius: 5px; 
}
/* Modal de Daño (Light Mode) */
#danoModal .modal-header h2 { margin: 0; font-size: 1.4em; }
#danoModal .modal-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   border-bottom: 1px solid rgba(0, 0, 0, 0.1);
   padding-bottom: 15px;
   margin-bottom: 20px;
}
#danoModal .close { 
   color: #555; font-size: 1.5rem; font-weight: bold; 
   cursor: pointer; background: none; border: none;
}


/* --- 19b. Prestamos (Dark Mode Overrides) --- */

body.dark-mode .main-title {
   color: #fff;
   border-bottom-color: rgba(255, 255, 255, 0.1);
}
/* Tarjetas (Dark Mode) */
body.dark-mode .card-section {
   background: rgba(30, 30, 45, 0.4);
   border: 1px solid rgba(255, 255, 255, 0.1);
   color: #f0f0f0;
}
body.dark-mode .card-section h5, 
body.dark-mode .card-section h4 {
   color: #fff;
}
body.dark-mode .card-section hr {
   border-color: rgba(255, 255, 255, 0.1);
}
/* Formularios (Dark Mode) */
body.dark-mode .form-label, 
body.dark-mode h6 {
   color: #f0f0f0;
}
body.dark-mode .form-control, 
body.dark-mode .form-select {
   background-color: rgba(20, 20, 30, 0.6);
   border: 1px solid rgba(255, 255, 255, 0.2);
   color: #fff;
}
body.dark-mode .form-control:read-only {
   background-color: rgba(40, 40, 60, 0.5);
}
body.dark-mode .form-select option {
   background-color: #2a2a45;
   color: #fff;
}
/* Botón "Registrar Préstamo" (Dark Mode) */
body.dark-mode .btn-principal {
   background-color: #6a5acd !important; /* Morado */
   border-color: #6a5acd !important;
}
body.dark-mode .btn-principal:hover {
   background-color: #7b68ee !important;
   border-color: #7b68ee !important;
}
/* Lista de materiales seleccionados (Dark Mode) */
body.dark-mode #listaMaterialSeleccionado {
   background-color: rgba(20, 20, 30, 0.6);
   border-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode #listaMaterialSeleccionado li {
   border-bottom-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode #placeholder-material {
   color: #888 !important;
}
/* Filtros (Dark Mode) */
body.dark-mode .filter-container {
   background-color: transparent;
   border: 1px solid rgba(255, 255, 255, 0.1);
}
body.dark-mode .input-group-text {
   background-color: rgba(20, 20, 30, 0.6);
   border: 1px solid rgba(255, 255, 255, 0.2);
   color: #ccc;
}
/* Tablas (Dark Mode) */
body.dark-mode .materials-table-container,
body.dark-mode .table-responsive {
   border-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode .table {
   color: #f0f0f0;
   --bs-table-bg: transparent;
}
body.dark-mode .table thead.table-light th {
   --bs-table-bg: rgba(40, 40, 60, 0.5);
   color: #fff;
   border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}
body.dark-mode .table td {
   border-bottom-color: rgba(255, 255, 255, 0.1);
   color: #f0f0f0;
}
body.dark-mode .table-hover > tbody > tr:hover > * {
   --bs-table-accent-bg: rgba(50, 50, 70, 0.4);
   color: #fff;
}
body.dark-mode .table-striped > tbody > tr:nth-of-type(odd) > * {
   --bs-table-accent-bg: rgba(255, 255, 255, 0.03);
   color: #f0f0f0;
}
/* Botones de tabla (Dark Mode) */
body.dark-mode .btn-outline-warning {
   color: #ffc107;
   border-color: #ffc107;
}
body.dark-mode .btn-outline-warning:hover {
   background-color: #ffc107;
   color: #000;
}
body.dark-mode .btn-outline-secondary {
   color: #aaa;
   border-color: #aaa;
}
body.dark-mode .btn-outline-secondary:hover {
   background-color: #aaa;
   color: #000;
}
/* Modal de Daño (Dark Mode) */
body.dark-mode #danoModal .modal-header h2 {
   color: #fff;
}
body.dark-mode #danoModal .close {
   color: #fff;
   text-shadow: none;
   opacity: 0.7;
}
/* =================================================== */
/* --- 18. ESTILOS COMPLETOS: INVENTARIO.HTML (¡CORREGIDO!) --- */
/* =================================================== */

/* --- 18a. Inventario (Light Mode) --- */
main#inventarioContent {
    padding: 1.5rem;
    margin: 20px auto;
    max-width: 1400px;
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}
main#inventarioContent h1 {
    color: #333;
    border-bottom: 2px solid rgba(0, 0, 0, 0.1);
    padding-bottom: 10px;
    margin-top: 0;
    margin-bottom: 1.5rem;
    font-weight: 700;
    font-size: 1.8em;
}
/* Modales (Light Mode) */
#agregarModal .modal-header h2,
#editModal .modal-header h2,
#logModal .modal-header h2 { 
    margin: 0; 
    font-size: 1.4em; 
}
#logModal .modal-content { max-width: 900px; }
#agregarModal .modal-header,
#editModal .modal-header,
#logModal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding-bottom: 10px;
}
#agregarModal .close,
#editModal .close,
#logModal .close {
    color: #555; font-size: 28px; font-weight: bold; 
    cursor: pointer; background: none; border: none;
}
/* Formularios dentro de modales (Light Mode) */
#agregarModal .form-group,
#editModal .form-group { margin-bottom: 15px; }
#agregarModal .form-group label,
#editModal .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
#agregarModal .form-group input,
#editModal .form-group input { width: 100%; padding: 8px; border: 1px solid #ced4da; border-radius: 4px; }
#agregarModal .btn-submit,
#editModal .btn-submit { 
    background-color: #28a745; color: white; padding: 10px 15px; 
    border: none; border-radius: 5px; cursor: pointer; width: 100%; 
}
/* Filtros (Light Mode) */
main#inventarioContent .filter-container { 
    display: flex; gap: 15px; margin-bottom: 1rem; flex-wrap: wrap; 
    padding: 10px; background-color: rgba(0, 0, 0, 0.03); border-radius: 5px; 
}
main#inventarioContent .filter-container label { font-size: 0.9em; cursor: pointer; }
/* Barra de herramientas (Light Mode) */
main#inventarioContent .toolbar { 
    display: flex; justify-content: space-between; align-items: center; 
    margin-bottom: 20px; flex-wrap: wrap; gap: 20px; 
}
main#inventarioContent .actions button { 
    color: white; border: none; padding: 10px 15px; border-radius: 5px; 
    cursor: pointer; font-size: 1em; transition: background-color 0.3s; margin-right: 10px; 
    background-color: #61021d; /* Guindo */
}
main#inventarioContent .actions button:hover { background-color: #4a000a; }
main#inventarioContent .actions button.btn-log { background-color: #17a2b8; }
main#inventarioContent .actions button.btn-log:hover { background-color: #138496; }
/* ¡ARREGLO! Hacemos los selectores de botones de tabla más específicos */
main#inventarioContent .table .btn.delete,
main#inventarioContent .actions button.delete { 
    background-color: #dc3545;
    color: white;
}
main#inventarioContent .table .btn.edit,
main#inventarioContent .actions button.edit { 
    background-color: #ffc107; 
    color: #212529; 
}
main#inventarioContent .search-section { flex-grow: 1; max-width: 500px; }
main#inventarioContent .search-bar input { border: 1px solid #ced4da; padding: 10px; border-radius: 5px; width: 100%; }
/* Tabla (Light Mode) */
main#inventarioContent .table-container { overflow-x: auto; }
/* ¡ARREGLO! Quitamos el ID para bajar especificidad */
main#inventarioContent .table th { color: #343a40; }
main#inventarioContent .status-dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; margin-right: 8px; }
main#inventarioContent .disponible { background-color: #28a745; }
main#inventarioContent .en-uso { background-color: #ffc107; }
main#inventarioContent .sin-stock { background-color: #dc3545; }
.flash-messages-container { position: fixed; top: 80px; right: 20px; z-index: 1050; width: 350px; }

#logModal .table-responsive { max-height: 500px; }

/* --- 18b. Inventario (Dark Mode Overrides) --- */
body.dark-mode main#inventarioContent {
    background: rgba(30, 30, 45, 0.4); 
    border: 1px solid rgba(255, 255, 255, 0.1); 
    color: #f0f0f0;
}
body.dark-mode main#inventarioContent h1 {
    color: #fff;
    border-bottom-color: rgba(255, 255, 255, 0.1);
}
/* Modales (Dark Mode) */
body.dark-mode #logModal .modal-content { max-width: 900px; }
body.dark-mode #agregarModal .form-group label,
body.dark-mode #editModal .form-group label { color: #f0f0f0; }
body.dark-mode #agregarModal .form-group input,
body.dark-mode #editModal .form-group input {
    background-color: #1e1e2f;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
}
body.dark-mode #agregarModal .btn-submit,
body.dark-mode #editModal .btn-submit { 
    background-color: #28a745; /* Verde */
}
/* Filtros (Dark Mode) */
body.dark-mode main#inventarioContent .filter-container { 
    background-color: transparent; 
    color: #f0f0f0; 
    border: 1px solid rgba(255, 255, 255, 0.1); 
}
/* Barra de herramientas (Dark Mode) */
body.dark-mode main#inventarioContent .toolbar .actions button { 
    background-color: #6a5acd; /* Morado */
}
body.dark-mode main#inventarioContent .toolbar .actions button.btn-log { 
    background-color: #17a2b8; /* Azulado */
}
/* ¡ARREGLO! Hacemos los selectores de botones de tabla más específicos */
body.dark-mode main#inventarioContent .table .btn.delete,
body.dark-mode main#inventarioContent .actions button.delete { 
    background-color: #dc3545; /* Rojo */
    color: white; /* <- Añadido para asegurar */
}
body.dark-mode main#inventarioContent .table .btn.edit,
body.dark-mode main#inventarioContent .actions button.edit { 
    background-color: #ffc107; /* Amarillo */
    color: #212529; 
}
/* ¡ARREGLO! Añadido estilo para el botón de QR */
body.dark-mode main#inventarioContent .table .btn-secondary {
    background-color: #444;
    border-color: #555;
    color: #fff;
}
body.dark-mode main#inventarioContent .table .btn-secondary:hover {
    background-color: #555;
    border-color: #666;
}
body.dark-mode main#inventarioContent .search-bar input { 
    background-color: rgba(20, 20, 30, 0.6); 
    border-color: rgba(255, 255, 255, 0.2);
    color: #fff;
}
/* Tabla (Dark Mode) */
body.dark-mode main#inventarioContent .table {
    color: #f0f0f0;
    --bs-table-bg: transparent; 
}
/* ¡ARREGLO! Selector ahora coincide con light mode */
body.dark-mode main#inventarioContent .table th {
    background-color: rgba(40, 40, 60, 0.5); 
    color: #fff; /* <- Este es el color de texto de cabecera */
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    --bs-table-bg: rgba(40, 40, 60, 0.5); 
}
body.dark-mode main#inventarioContent .table td {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: #f0f0f0; /* <- Este es el color de texto de filas */
}
body.dark-mode main#inventarioContent .table-hover > tbody > tr:hover > * {
    --bs-table-accent-bg: rgba(50, 50, 70, 0.4); 
    color: #fff;
}
body.dark-mode .modal-content .table th {
    background-color: rgba(40, 40, 60, 0.5); 
    color: #fff; /* <-- El arreglo para el header */
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    --bs-table-bg: rgba(40, 40, 60, 0.5); 
}

body.dark-mode .modal-content .table td {
    color: #f0f0f0; /* <-- El arreglo para las celdas (filas) */
    border-bottom-color: rgba(255, 255, 255, 0.1);
}

/* Ajuste para tabla rayada (striped) en modal */
body.dark-mode .modal-content .table-striped > tbody > tr:nth-of-type(odd) > * {
   --bs-table-accent-bg: rgba(255, 255, 255, 0.03); 
   color: #f0f0f0; 
}

/* Ajuste para hover en modal */
body.dark-mode .modal-content .table-hover > tbody > tr:hover > * {
   --bs-table-accent-bg: rgba(50, 50, 70, 0.4); 
   color: #fff;
}
/* --- FIN DEL BLOQUE NUEVO --- */
/* =================================================== */
/* --- 13. ESTILOS MODO NOCHE PARA GESTION_DANOS.HTML --- */
/* =================================================== */

/* Navbar Específica (navbar-custom-guindo) */
/* (Este bloque es el mismo de inventario, asegura que el navbar se vea bien) */
body.dark-mode .navbar-custom-guindo {
    background-color: rgba(20, 20, 30, 0.8); /* Fondo del navbar oscuro y translúcido */
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
}
body.dark-mode .navbar-custom-guindo .navbar-brand,
body.dark-mode .navbar-custom-guindo .nav-link {
    color: #f0f0f0; /* Texto del navbar más claro */
}
body.dark-mode .navbar-custom-guindo .nav-link:hover {
    color: #fff;
}
body.dark-mode .navbar-custom-guindo .nav-link.active {
    color: #6a5acd; 
    border-bottom-color: #6a5acd; 
}
body.dark-mode .navbar-custom-guindo .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255, 255, 255, 0.7)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* Tarjeta de contenido principal (Glassmorphism) */
body.dark-mode main#gestionDanosContent {
    background: rgba(30, 30, 45, 0.4); /* Fondo más oscuro y translúcido */
    border: 1px solid rgba(255, 255, 255, 0.1); /* Borde sutil */
    backdrop-filter: blur(10px);
    color: #f0f0f0; /* Texto claro */
}

/* Títulos "Reposición" y "Daños Pendientes" */
body.dark-mode main#gestionDanosContent h1,
body.dark-mode main#gestionDanosContent h4 {
    color: #fff; /* Título en blanco */
    border-bottom-color: rgba(255, 255, 255, 0.1); /* Línea divisoria clara */
}
body.dark-mode main#gestionDanosContent h4 {
    border-bottom: none; /* El h4 no necesita línea */
}


/* Tabla de Daños */
body.dark-mode .table-container .table {
    color: #f0f0f0;
}
/* Cabecera de la tabla (sobrescribir .table-light) */
body.dark-mode .table thead.table-light th { 
    background-color: rgba(40, 40, 60, 0.8); /* Cabecera de tabla oscura */
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
}
body.dark-mode .table td {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
body.dark-mode .table tr:hover {
    background-color: rgba(50, 50, 70, 0.7); /* Hover en filas */
}

/* Texto de "No hay materiales..." */
body.dark-mode .table .text-muted {
    color: #888 !important; /* Hacemos el texto más claro */
}

/* Botón "Marcar Repuesto" */
body.dark-mode .btn-reponer {
    background-color: #28a745; /* Mantenemos verde para la acción */
    color: white;
}
/* =================================================== */
/* --- 14. ESTILOS MODO NOCHE PARA GESTION_ALUMNOS.HTML (¡CORREGIDO!) --- */
/* =================================================== */

/* Navbar Específica (navbar-custom-guindo) */
body.dark-mode .navbar-custom-guindo {
    background-color: rgba(20, 20, 30, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
}
body.dark-mode .navbar-custom-guindo .navbar-brand,
body.dark-mode .navbar-custom-guindo .nav-link {
    color: #f0f0f0;
}
body.dark-mode .navbar-custom-guindo .nav-link:hover {
    color: #fff;
}
body.dark-mode .navbar-custom-guindo .nav-link.active {
    color: #6a5acd; 
    border-bottom-color: #6a5acd; 
}
body.dark-mode .navbar-custom-guindo .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%<path stroke='rgba(255, 255, 255, 0.7)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* Tarjeta de contenido principal (Glassmorphism) */
body.dark-mode main#gestionAlumnosContent .card {
    background: rgba(30, 30, 45, 0.4); 
    border: 1px solid rgba(255, 255, 255, 0.1); 
    backdrop-filter: blur(10px);
    color: #f0f0f0; 
}

/* Título "Gestión de Alumnos" */
body.dark-mode main#gestionAlumnosContent h2 {
    color: #fff; 
    border-bottom-color: rgba(255, 255, 255, 0.1); 
}

/* --- ¡INICIO DEL ARREGLO DE TABLA! --- */
body.dark-mode main#gestionAlumnosContent .table {
    color: #f0f0f0;
    /* ARREGLO 1: Hacer el fondo de la tabla transparente */
    --bs-table-bg: transparent; 
}
/* Cabecera de la tabla (sobrescribir .table-dark) */
body.dark-mode main#gestionAlumnosContent .table .table-dark th {
    background-color: rgba(40, 40, 60, 0.8); /* Fondo oscuro */
    color: #fff; /* ¡AQUÍ ESTÁ EL ARREGLO! */
    border-color: rgba(255, 255, 255, 0.2);
    /* Sincroniza la variable de Bootstrap por si acaso */
    --bs-table-bg: rgba(40, 40, 60, 0.8);
    --bs-table-color: #fff;
}
body.dark-mode main#gestionAlumnosContent .table td {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    /* ARREGLO 2: Poner el texto de las celdas en color claro */
    color: #f0f0f0; 
}
/* Ajuste para tabla rayada (striped) */
body.dark-mode main#gestionAlumnosContent .table-striped > tbody > tr:nth-of-type(odd) > * {
    --bs-table-accent-bg: rgba(255, 255, 255, 0.03); 
    /* ARREGLO 3: Asegurar que el texto de las filas rayadas también sea claro */
    color: #f0f0f0; 
}
body.dark-mode main#gestionAlumnosContent .table-hover > tbody > tr:hover > * {
    --bs-table-accent-bg: rgba(50, 50, 70, 0.7); 
    color: #fff; /* El color del hover ya estaba bien */
}
/* --- FIN DEL ARREGLO DE TABLA --- */

/* Badges de Estatus */
body.dark-mode .badge.bg-secondary {
    background-color: #555 !important; 
    color: #fff !important;
}

/* Modales (Agregar/Editar) */
body.dark-mode .modal-content {
    background-color: #2a2a45;
    backdrop-filter: none;
    color: #f0f0f0;
    border: 1px solid rgba(255, 255, 255, 0.2);
}
/* Header del modal (azul) */
body.dark-mode .modal-header.bg-primary {
    background-color: #6a5acd !important; 
    border-bottom-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode .modal-header .btn-close-white {
    filter: invert(1) grayscale(100%) brightness(200%); 
}
body.dark-mode .modal-body {
     background-color: #2a2a45;
}
body.dark-mode .modal-footer {
    background-color: #2a2a45;
    border-top-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode .modal-body .form-label {
    color: #f0f0f0;
}
/* Inputs y Selects dentro del modal */
body.dark-mode .modal-body .form-control,
body.dark-mode .modal-body .form-select {
    background-color: #1e1e2f; 
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
}
/* Opciones del select */
body.dark-mode .modal-body .form-select option {
    background-color: #2a2a45;
    color: #fff;
}
/* =================================================== */
/* --- 15. ESTILOS COMPLETOS: GESTION_AUXILIARES.HTML --- */
/* =================================================== */

/* --- 15a. Base Layout (Light Mode) --- */

main#gestionAuxiliaresContent {
    padding: 1.5rem;
}
.container-main-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
}
/* Tarjetas (Light Mode "Frosted Glass") */
main#gestionAuxiliaresContent .card {
   background-color: rgba(255, 255, 255, 0.7);
   backdrop-filter: blur(10px);
   border: 1px solid rgba(255, 255, 255, 0.3);
   border-radius: 16px;
   box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
   padding: 25px; 
   height: 100%;
}
/* Títulos de tarjeta (Light Mode) */
main#gestionAuxiliaresContent .card h2 { 
   color: #333;
   border-bottom: 2px solid rgba(0, 0, 0, 0.1);
   padding-bottom: 10px; 
   margin-top: 0; 
   font-size: 1.3em; 
   font-weight: 600; 
}
/* Tabla (Light Mode) */
main#gestionAuxiliaresContent .table { margin-bottom: 0; }
main#gestionAuxiliaresContent .table th { 
   font-weight: 600; 
   background-color: rgba(0, 0, 0, 0.03);
   color: #333;
}
main#gestionAuxiliaresContent .table td { vertical-align: middle; }
main#gestionAuxiliaresContent .table td .btn { padding: 0.3rem 0.6rem; font-size: 0.9em; margin-right: 5px; }

/* Botones de tabla (Light Mode) */
.btn-editar { background-color: #ffc107; color: #333; border: none; }
.btn-eliminar { background-color: #dc3545; color: white; border: none; }

/* Formularios (Light Mode) */
main#gestionAuxiliaresContent .form-label { font-weight: 600; }
main#gestionAuxiliaresContent .form-control:focus { 
   border-color: #951da7; 
   box-shadow: 0 0 0 0.25rem rgba(149, 29, 167, 0.25); 
}
main#gestionAuxiliaresContent .btn-primary { 
   background-color: #934870; /* Guindo */
   border-color: #934870; 
}
main#gestionAuxiliaresContent .btn-primary:hover { 
   background-color: #951da7; /* Morado */
   border-color: #951da7; 
}
main#gestionAuxiliaresContent .mantenimiento h2 { color: #c82333; font-size: 1.2em; }
main#gestionAuxiliaresContent .mantenimiento p { font-size: 0.9em; color: #6c757d; margin-bottom: 1rem; }

/* Modal (Light Mode) */
#editModal .modal-content {
   background-color: rgba(255, 255, 255, 0.9);
   backdrop-filter: blur(10px);
   border: 1px solid rgba(255, 255, 255, 0.3);
   border-radius: 16px;
}
#editModal .modal-header { 
   background-color: rgba(81, 9, 28, 0.7); /* Guindo traslúcido */
   color: white; 
   border-bottom: 1px solid rgba(255, 255, 255, 0.3);
}
#editModal .modal-header .btn-close { filter: invert(1) grayscale(100%) brightness(200%); }
#editModal .modal-footer { border-top: 1px solid #dee2e6; }
#editModal .form-text { font-size: 0.85em; }

@media (max-width: 992px) {
   .container-main-grid { grid-template-columns: 1fr; }
}


/* =================================================== */
/* --- 15b. Dark Mode Overrides (¡CORREGIDO!) --- */
/* =================================================== */

/* Tarjetas (Dark Mode) */
body.dark-mode main#gestionAuxiliaresContent .card {
    background: rgba(30, 30, 45, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #f0f0f0;
 }
 /* Títulos de tarjeta (Dark Mode) */
 body.dark-mode main#gestionAuxiliaresContent .card h2 {
    color: #fff;
    border-bottom-color: rgba(255, 255, 255, 0.1);
 }
 
/* Tabla (Dark Mode) */
body.dark-mode main#gestionAuxiliaresContent .table {
    color: #f0f0f0;
    --bs-table-bg: transparent; 
 }
 body.dark-mode main#gestionAuxiliaresContent .table th {
    background-color: rgba(40, 40, 60, 0.5); 
    color: #fff;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    --bs-table-bg: rgba(40, 40, 60, 0.5);
 }
 body.dark-mode main#gestionAuxiliaresContent .table td {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: #f0f0f0; /* ¡AQUÍ ESTÁ EL ARREGLO! */
 }
 body.dark-mode main#gestionAuxiliaresContent .table-hover > tbody > tr:hover > * {
    --bs-table-accent-bg: rgba(50, 50, 70, 0.4); 
    color: #fff;
 }
 
 /* Formularios (Dark Mode) */
 body.dark-mode main#gestionAuxiliaresContent .form-label {
    color: #f0f0f0;
 }
 body.dark-mode main#gestionAuxiliaresContent .form-control {
    background-color: #1e1e2f;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
 }
 body.dark-mode main#gestionAuxiliaresContent .form-control:focus {
    background-color: #1e1e2f;
    color: #fff;
    border-color: #6a5acd;
    box-shadow: 0 0 0 0.25rem rgba(106, 90, 205, 0.25);
 }
 /* Botón "Agregar Auxiliar" (Dark Mode) */
 body.dark-mode main#gestionAuxiliaresContent .btn-primary {
    background-color: #6a5acd; /* Morado */
    border-color: #6a5acd;
 }
 body.dark-mode main#gestionAuxiliaresContent .btn-primary:hover {
    background-color: #7b68ee;
    border-color: #7b68ee;
 }
 /* Mantenimiento (Dark Mode) */
 body.dark-mode main#gestionAuxiliaresContent .mantenimiento h2 {
    color: #ffc107; /* Amarillo */
 }
 body.dark-mode main#gestionAuxiliaresContent .mantenimiento p {
    color: #ccc;
 }
 
 /* Modal (Dark Mode) */
 body.dark-mode #editModal .modal-content {
    background-color: #2a2a45;
    backdrop-filter: none;
    color: #f0f0f0;
    border: 1px solid rgba(255, 255, 255, 0.2);
 }
 body.dark-mode #editModal .modal-header { 
    background-color: #6a5acd; /* Morado */
    color: white; 
    border-bottom-color: rgba(255, 255, 255, 0.1);
 }
 body.dark-mode #editModal .modal-header .btn-close { 
    filter: invert(1) grayscale(100%) brightness(200%); 
 }
 body.dark-mode #editModal .modal-body,
 body.dark-mode #editModal .modal-footer {
    background-color: #2a2a45;
    border-top-color: rgba(255, 255, 255, 0.1);
 }
 body.dark-mode #editModal .modal-body .form-text {
    color: #ccc;
 }
/* =================================================== */
/* --- 16. ESTILOS COMPLETOS: SOPORTE.HTML --- */
/* =================================================== */

/* --- 16a. Soporte (Light Mode) --- */

main#soporteContent .container {
    max-width: 800px;
    margin: 20px auto;
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 40px;
    border-radius: 16px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}
main#soporteContent header {
    text-align: center;
    margin-bottom: 30px;
    border-bottom: 2px solid rgba(0, 0, 0, 0.1);
    padding-bottom: 20px;
}
main#soporteContent header h1 { 
    font-size: 2em; 
    color: var(--color-acento-morado); /* Morado */
    margin: 0; 
}
main#soporteContent header p { font-size: 1.1em; color: #555; }

.support-content { display: flex; flex-wrap: wrap; gap: 40px; }
.contact-info, .contact-form { flex: 1; min-width: 300px; }
.contact-info h2, .contact-form h2 { 
    font-size: 1.5em; 
    color: var(--color-acento-morado); /* Morado */
    margin-top: 0; 
    margin-bottom: 1rem; 
}
.contact-info p { font-size: 1em; line-height: 1.6; margin-bottom: 0.8rem; }
.contact-info strong { color: #333; }

main#soporteContent .form-group { margin-bottom: 20px; }
main#soporteContent .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #444; }
main#soporteContent .form-group input, 
main#soporteContent .form-group textarea { 
    width: 100%; padding: 12px; 
    border: 1px solid #ccc; 
    border-radius: 5px; 
    font-size: 1em; 
}
main#soporteContent .form-group input:focus, 
main#soporteContent .form-group textarea:focus { 
    outline: none; 
    border-color: #6a5acd; /* Morado */
    box-shadow: 0 0 0 0.2rem rgba(106, 90, 205, 0.25); /* Sombra morada */
}
main#soporteContent .form-group input.invalid, 
main#soporteContent .form-group textarea.invalid { border-color: #dc3545; }
main#soporteContent .error-message { color: #dc3545; font-size: 0.875em; margin-top: 5px; display: none; }
main#soporteContent .char-counter { font-size: 0.8em; color: #6c757d; text-align: right; margin-top: 4px; }
main#soporteContent .char-counter.warning { color: #fd7e14; }
main#soporteContent .char-counter.limit { color: #dc3545; font-weight: bold; }
main#soporteContent textarea { resize: vertical; min-height: 120px; }
main#soporteContent button[type="submit"] {
     width: 100%; padding: 15px; background-color: #1d034d; /* Azul oscuro/morado */
     color: #ffffff; border: none; border-radius: 5px; font-size: 1.1em; 
     font-weight: bold; cursor: pointer; transition: background-color 0.2s; 
}
main#soporteContent button[type="submit"]:hover { background-color: #6a5acd; } /* Morado más claro */
.flash-messages-local { margin-top: 20px; max-width: 800px; margin-left: auto; margin-right: auto; }
/* Estilos de Alertas (Light Mode) */
.alert-success { color: #0f5132; background-color: #d1e7dd; border-color: #badbcc; }
.alert-danger { color: #842029; background-color: #f8d7da; border-color: #f5c2c7; }
.alert-warning { color: #664d03; background-color: #fff3cd; border-color: #ffecb5; }

@media (max-width: 768px) {
    main#soporteContent .container { padding: 20px; }
}


/* --- 16b. Soporte (Dark Mode Overrides) --- */

/* Contenedor principal (Glassmorphism) */
body.dark-mode main#soporteContent .container {
    background: rgba(30, 30, 45, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #f0f0f0;
}
/* Encabezados y texto (Dark Mode) */
body.dark-mode main#soporteContent header { border-bottom-color: rgba(255, 255, 255, 0.1); }
body.dark-mode main#soporteContent header h1 { color: #fff; }
body.dark-mode main#soporteContent header p { color: #ccc; }
body.dark-mode .contact-info h2, 
body.dark-mode .contact-form h2 { color: #fff; }
body.dark-mode .contact-info p { color: #f0f0f0; }
body.dark-mode .contact-info strong { color: #fff; }

/* Formularios (Dark Mode) */
body.dark-mode main#soporteContent .form-group label { color: #f0f0f0; }
body.dark-mode main#soporteContent .form-group input, 
body.dark-mode main#soporteContent .form-group textarea {
    background-color: #1e1e2f;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
}
body.dark-mode main#soporteContent .form-group input:focus, 
body.dark-mode main#soporteContent .form-group textarea:focus {
    background-color: #1e1e2f;
    color: #fff;
    border-color: #6a5acd;
    box-shadow: 0 0 0 0.25rem rgba(106, 90, 205, 0.25);
}
body.dark-mode main#soporteContent .char-counter { color: #888; }

/* Botón "Enviar Mensaje" (Dark Mode) */
body.dark-mode main#soporteContent button[type="submit"] {
    background-color: #6a5acd; /* Morado */
}
body.dark-mode main#soporteContent button[type="submit"]:hover {
    background-color: #7b68ee; /* Morado más claro */
}

/* Alertas de Flash (Dark Mode) */
body.dark-mode .alert-success {
    color: #a3cfbb;
    background-color: #1a4233;
    border-color: #2a684b;
}
body.dark-mode .alert-danger {
    color: #f1b0b7;
    background-color: #58151c;
    border-color: #8c232e;
}
body.dark-mode .alert-warning {
    color: #ffda6a;
    background-color: #4d3800;
    border-color: #805b00;
}
/* =================================================== */
/* --- 17. ESTILOS COMPLETOS: REPORTES.HTML --- */
/* =================================================== */

/* --- 17a. Reportes (Light Mode) --- */

/* (Estilos copiados de tu <style> original) */
.main-header { 
    max-width: 1400px; 
    margin: 20px auto 30px auto;
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 20px 30px; 
    border-radius: 16px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
}
.header-content { display: flex; align-items: center; }
.logo { height: 50px; margin-right: 20px; }
.header-text h1 { font-size: 1.5em; color: var(--color-acento-morado); margin: 0; font-weight: 600; }
.header-text h2 { font-size: 1.2em; color: #555; margin: 0; font-weight: 300; }

.header-actions { display: flex; gap: 15px; }
.header-actions a { 
    background-color: #6c757d; 
    color: #fff; 
    padding: 10px 15px; 
    border-radius: 5px; 
    text-decoration: none; 
    font-weight: 500;
    display: inline-flex; 
    align-items: center;
}
.header-actions a:hover { background-color: #5a6268; }
.excel-btn { background-color: #198754 !important; } 
.excel-btn:hover { background-color: #157347 !important; }

.dashboard-grid { 
    display: grid;
    grid-template-columns: repeat(4, 1fr); 
    column-gap: 20px;
    row-gap: 12px;
    max-width: 1400px; 
    margin: 20px auto; 
}
.dashboard-grid .card { 
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    align-self: start;
}
.dashboard-grid .card h3 { 
    margin-top: 0; font-size: 1.2em; color: #333;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding-bottom: 10px; 
    margin-bottom: 15px;
}
.dashboard-grid .card h3 i { margin-right: 8px; color: var(--color-acento-morado); }
.kpi-card { text-align: center; }
.kpi-value { 
    font-size: 2.5em; 
    font-weight: 700; 
    color: var(--color-acento-morado);
}
.kpi-label { font-size: 1em; color: #6c757d; margin-top: 5px; }

.list { list-style: none; padding: 0; margin:0; }
.list li { 
    background-color: rgba(0, 0, 0, 0.03);
    padding: 10px; border-radius: 4px; 
    margin-bottom: 8px; display: flex; justify-content: space-between; 
    align-items: center;
}
.list .value { 
    font-weight: 600; 
    background-color: var(--color-acento-morado);
    color: white; 
    padding: 3px 8px; border-radius: 10px; font-size: 0.9em; 
}
.list .date { font-size: 0.85em; color: #888; }
.list .timer { 
    background-color: #20c997;
    color: white; min-width: 70px; text-align: center; 
}
.dashboard-grid .card p.text-muted { 
    text-align: center; margin-top: 10px; 
} 

.grid-col-span-2 { grid-column: span 2; }

.table-wrapper { 
    max-height: 400px; overflow-y: auto; border: 1px solid rgba(0,0,0,0.1); border-radius: 4px; 
}
.chart-container {
    position: relative; 
    height: 300px; 
    width: 100%;
    margin-top: 15px;
}
.report-table { width: 100%; border-collapse: collapse; }
.report-table th, .report-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #f0f0f0; vertical-align: middle; }
.report-table th { 
    background-color: rgba(0, 0, 0, 0.03);
    font-weight: 600; color: #343a40; 
    position: sticky; top: 0; 
}
.report-table tr:hover { background-color: rgba(255,255,255,0.5); }
.status-dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; margin-right: 5px; }
.status-dot.Activo { background-color: #ffc107; }
.status-dot.Devuelto { background-color: #28a745; }
.flash-messages-container-local { margin-bottom: 1.5rem; }

@media (max-width: 1200px) {
    .dashboard-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 768px) {
    .dashboard-grid { grid-template-columns: 1fr; }
    .grid-col-span-2 { grid-column: span 1; }
    .header-content { flex-direction: column; align-items: flex-start; }
    .header-actions { flex-direction: column; width: 100%; margin-top: 15px; }
    .header-actions a { justify-content: center; }
}


/* --- 17b. Reportes (Dark Mode Overrides) --- */

/* Header Principal (Dark Mode) */
body.dark-mode .main-header {
    background-color: rgba(30, 30, 45, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
body.dark-mode .header-text h1 { color: #fff; }
body.dark-mode .header-text h2 { color: #ccc; }

/* Tarjetas del Grid (Dark Mode) */
body.dark-mode .dashboard-grid .card {
    background-color: rgba(30, 30, 45, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #f0f0f0;
}
body.dark-mode .dashboard-grid .card h3 {
    color: #fff;
    border-bottom-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode .dashboard-grid .card h3 i {
    color: #fff; /* Hacemos íconos blancos */
}
/* Tarjetas KPI (Dark Mode) */
body.dark-mode .kpi-value { color: #fff; }
body.dark-mode .kpi-label { color: #ccc; }

/* Listas (Dark Mode) */
body.dark-mode .list li {
    background-color: rgba(20, 20, 30, 0.6);
    color: #f0f0f0;
}
/* ¡AÑADE ESTA REGLA! */
body.dark-mode .list li.text-muted {
    color: #888 !important; /* Un gris claro, ¡importante! */
    background-color: transparent; /* Quita el fondo de la lista */
}
body.dark-mode .list .value {
    background-color: #6a5acd; /* Mantenemos morado */
    color: white;
}
body.dark-mode .list .date { color: #999; }
body.dark-mode .list .timer {
    background-color: #20c997; /* Mantenemos verde menta */
    color: white;
}
body.dark-mode .dashboard-grid .card p.text-muted {
    color: #888 !important;
}

/* Tabla de Préstamos Recientes (Dark Mode) */
body.dark-mode .table-wrapper {
    border-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode .report-table {
    color: #f0f0f0;
}
body.dark-mode .report-table th {
    background-color: rgba(40, 40, 60, 0.8);
    color: #fff;
    border-bottom-color: rgba(255, 255, 255, 0.2);
}
body.dark-mode .report-table td {
    border-bottom-color: rgba(255, 255, 255, 0.1);
}
body.dark-mode .report-table tr:hover {
    background-color: rgba(50, 50, 70, 0.7);
}

/* Gráfico (Dark Mode) - El JS se encarga de los labels */
body.dark-mode .chart-container {
    /* Opcional: un fondo si el gráfico no lo tiene */
}

/* Alertas de Flash (Dark Mode) */
body.dark-mode .alert-success {
    color: #a3cfbb; background-color: #1a4233; border-color: #2a684b;
}
body.dark-mode .alert-danger {
    color: #f1b0b7; background-color: #58151c; border-color: #8c232e;
}
body.dark-mode .alert-warning {
    color: #ffda6a; background-color: #4d3800; border-color: #805b00;
}
/* =================================================== */
/* --- 20. ARREGLO GLOBAL: PLACEHOLDERS MODO OSCURO --- */
/* =================================================== */

body.dark-mode .form-control::placeholder {
    color: #888 !important; /* Un gris claro */
    opacity: 1; /* Asegura que no sea transparente */
}

/* Para Firefox (usa una opacidad diferente) */
body.dark-mode .form-control::-moz-placeholder {
    color: #888 !important;
    opacity: 1;
}

/* Para Internet Explorer */
body.dark-mode .form-control:-ms-input-placeholder {
    color: #888 !important;
}

/* Para Microsoft Edge */
body.dark-mode .form-control::-ms-input-placeholder {
    color: #888 !important;
}

/* 1. El footer ahora es 'relative' para contener el indicador */
.chat-footer {
    position: relative;
}

#chatbot-indicator {
    position: absolute; /* Flota SOBRE el footer */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* ¡ARREGLO! Usa el color de fondo claro del footer SIEMPRE.
      (Este es el color de .chat-footer en modo claro) 
    */
    background-color: #f4f6fc;
    display: flex;
    justify-content: center;
    align-items: center;

    /* Animación de entrada/salida */
    opacity: 0;
    transform: translateY(20px); /* Empieza "abajo" */
    transition: opacity 0.3s ease, transform 0.3s ease;
    pointer-events: none; /* No se puede Cliclear */
}

/* 3. Estilo del logo (¡CON FONDO BLANCO!) */
.labflow-logo-indicator {
    width: 40px; 
    height: 40px;
    object-fit: contain;
    background-color: #ffffff; /* ¡FONDO BLANCO! */
    border-radius: 50%;      /* Hace el fondo blanco circular */
    padding: 4px;             /* Espacio para que el logo respire */
    
    /* Animación de pulso */
    animation: pulse 1.5s infinite ease-out;
}

/* 4. Estilo de "Escuchando" (cuando se muestra) */
#chatbot-indicator.is-listening {
    opacity: 1;
    transform: translateY(0); /* Sube a su posición */
    pointer-events: auto; /* Se puede "ver" */
}

/* 5. Keyframe para la animación de pulso */
@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(106, 90, 205, 0.4); }
    70% { box-shadow: 0 0 0 15px rgba(106, 90, 205, 0); }
    100% { box-shadow: 0 0 0 0 rgba(106, 90, 205, 0); }
}
/* =================================================== */
/* --- 7. CHATBOT (ESTILOS MODERNOS - CORREGIDO) --- */
/* =================================================== */

/* --- 7a. Estilos Base y Modo Claro --- */

.chat-bubble {
    position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px;
    background-color: #6a5acd; /* Botón se queda morado */
    color: white; border-radius: 50%; display: flex; align-items: center;
    justify-content: center; font-size: 24px; cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: all 0.3s ease; z-index: 1050;
}
.chat-bubble:hover { transform: scale(1.1); }

.chat-window {
    position: fixed; bottom: 100px; right: 30px; 
    width: 380px; 
    max-height: 700px; /* ¡MÁS ALTO! (antes 600px) */
    /* ¡ARREGLO! Vuelve a ser blanco en modo claro */
    background-color: #fff; 
    border: 1px solid #ddd;
    border-radius: 16px; 
    box-shadow: 0 5px 20px rgba(0,0,0,0.2); 
    display: none; flex-direction: column; z-index: 1049; overflow: hidden;
    transition: background-color 0.3s ease, border-color 0.3s ease;
    /* position: relative; FUE ELIMINADO */
}
.chat-window.active { display: flex; }

.chat-header {
    background-color: #f4f6fc; 
    color: #333;
    border-bottom: 1px solid #eee;
    padding: 12px 20px; 
    font-weight: 600; display: flex;
    justify-content: space-between; align-items: center;
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    /* ¡ARREGLO! Asegura que el header esté encima del fondo */
    position: relative;
    z-index: 2;
}
#chat-close-btn {
    background: none; border: none; font-size: 1.8em; 
    color: #aaa; cursor: pointer; font-weight: 300; 
    transition: color 0.2s ease;
}
#chat-close-btn:hover { color: #333; }

.chat-body {
    background-color: transparent; /* ¡ARREGLO! Usa el fondo de .chat-window */
    flex-grow: 1; padding: 20px; overflow-y: auto;
    display: flex; flex-direction: column; 
    gap: 15px; 
    transition: background-color 0.3s ease;
    /* ¡ARREGLO! Asegura que los mensajes estén encima del fondo */
    position: relative;
    z-index: 2;
}

/* --- Estilos para mensajes con iconos (Sin cambios) --- */
.chat-message {
    display: flex;
    align-items: flex-start; 
    gap: 10px; 
    max-width: 85%; 
    line-height: 1.5;
}
.chat-message span {
    padding: 12px 18px;
    border-radius: 18px; 
    flex-grow: 1;
}
.chat-message i {
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    margin-top: 5px; 
}

/* --- Mensajes (Modo Claro) (Sin cambios) --- */
.chat-message.bot {
    background-color: transparent;
    align-self: flex-start;
}
.chat-message.bot i {
    background-color: #6a5acd; 
    color: #fff;
}
.chat-message.bot span {
    background-color: #f1f0f0; 
    color: #333;
    border-bottom-left-radius: 4px; 
}

.chat-message.user {
    background-color: transparent;
    align-self: flex-end;
    flex-direction: row-reverse; 
}
.chat-message.user i {
    background-color: #e0e0e0; 
    color: #555;
}
.chat-message.user span {
    background-color: #6a5acd; 
    color: white;
    border-bottom-right-radius: 4px; 
}

/* --- Footer (Modo Claro) --- */
.chat-footer {
    background-color: #f4f6fc; /* ¡ARREGLO! Vuelve a ser opaco en modo claro */
    border-top: 1px solid #eee;
    display: flex; 
    padding: 15px; 
    gap: 10px; 
    transition: background-color 0.3s ease, border-color 0.3s ease;
    /* ¡ARREGLO! Asegura que el footer esté encima del fondo */
    position: relative;
    z-index: 2;
}
#chat-input {
    border: 1px solid #ddd; 
    background-color: #fff;
    color: #333;
    flex-grow: 1; 
    border-radius: 10px; 
    padding: 10px 15px;
    font-size: 1em;
    margin-right: 0; 
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}
#chat-input:focus {
    border-color: #6a5acd;
    box-shadow: 0 0 0 2px rgba(106, 90, 205, 0.2);
    outline: none;
}
#chat-send-btn {
    background-color: #6a5acd; 
    color: white; border: none; 
    border-radius: 10px; 
    width: 44px; 
    height: 44px; 
    cursor: pointer; 
    font-size: 1.1em;
    flex-shrink: 0; 
    transition: background-color 0.2s ease;
}
#chat-send-btn:hover {
    background-color: #5849a9;
}

/* =================================================== */
/* --- 7b. CHATBOT (MODO OSCURO - CORREGIDO) --- */
/* =================================================== */

/* --- Ventana Principal (Estilo "Glassmorphism") --- */
body.dark-mode .chat-window {
    background-color: rgba(20, 20, 35, 0.85); /* Fondo oscuro traslúcido */
    backdrop-filter: blur(15px); 
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.1); 
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); 
}

/* --- Cabecera (Modo Oscuro) --- */
body.dark-mode .chat-header {
    background-color: transparent; /* Fondo transparente */
    border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
    color: #f0f0f0; 
}
body.dark-mode #chat-close-btn {
    color: #aaa;
}
body.dark-mode #chat-close-btn:hover {
    color: #fff;
}

/* --- Cuerpo del Chat (Modo Oscuro) --- */
body.dark-mode .chat-body {
    background-color: transparent; 
}

/* --- Mensajes del Bot (Modo Oscuro) --- */
body.dark-mode .chat-message.bot i {
    background-color: #6a5acd; 
    color: #fff;
}
body.dark-mode .chat-message.bot span {
    background-color: rgba(42, 42, 69, 0.8); /* Ligeramente traslúcido */
    color: #f0f0f0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* --- Mensajes del Usuario (Modo Oscuro) --- */
body.dark-mode .chat-message.user i {
    background-color: #444; 
    color: #fff;
}
body.dark-mode .chat-message.user span {
    background-color: rgba(106, 90, 205, 0.8); /* Ligeramente traslúcido */
    color: white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* --- Footer (Input) (Modo Oscuro) --- */
body.dark-mode .chat-footer {
    background-color: transparent; /* Fondo de input traslúcido */
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}
body.dark-mode #chat-input {
    background-color: rgba(255, 255, 255, 0.08); /* Input sutil */
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #fff;
}
body.dark-mode #chat-input::placeholder {
    color: #888;
}
body.dark-mode #chat-input:focus {
    border-color: #6a5acd; 
    box-shadow: 0 0 0 2px rgba(106, 90, 205, 0.3);
}

/* --- Botón de Enviar (Modo Oscuro) --- */
body.dark-mode #chat-send-btn {
    background-color: #6a5acd; 
}
body.dark-mode #chat-send-btn:hover {
    background-color: #7b68ee; 
}

/* =================================================== */
/* --- 8. ESTILOS DEL BOTÓN DE VOZ (CORREGIDO) --- */
/* =================================================== */

/* --- 8a. Botón de Voz (Modo Claro) --- */
#chat-voice-btn {
    background-color: #f4f6fc; 
    color: #6a5acd; 
    border: 1px solid #ddd;
    border-radius: 10px; 
    width: 44px;
    height: 44px;
    cursor: pointer;
    font-size: 1.1em;
    flex-shrink: 0;
    transition: all 0.2s ease;
}
#chat-voice-btn:hover {
    background-color: #e9eaf0;
    border-color: #ccc;
}

/* Estado de "escuchando" */
#chat-voice-btn.is-listening {
    background-color: #dc3545; 
    color: #fff;
    border-color: #dc3545;
    animation: pulse-voice 1.5s infinite; 
}

/* --- 8b. Botón de Voz (Modo Oscuro) --- */
body.dark-mode #chat-voice-btn {
    background-color: rgba(255, 255, 255, 0.05); 
    color: #f0f0f0; 
    border: 1px solid rgba(255, 255, 255, 0.1);
}
body.dark-mode #chat-voice-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: #6a5acd;
}
body.dark-mode #chat-voice-btn.is-listening {
    background-color: #dc3545;
    border-color: #dc3545;
    color: #fff;
}

/* Keyframes para la animación de pulso (Sin cambios) */
@keyframes pulse-voice {
    0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(220, 53, 69, 0); }
    100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
}

/* =================================================== */
/* --- 9. FONDO DEL CHAT CON MASCOTA (CORREGIDO) --- */
/* =================================================== */

.chat-background-elements {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100%; height: 100%;
    overflow: hidden; 
    z-index: 1; /* ¡ARREGLO! Detrás del header, body y footer */
    pointer-events: none; 
}

/* Contenedor de la mascota */
.mascot-container {
    position: absolute;
    width: 280px; /* ¡MÁS GRANDE! (antes 200px) */
    height: 280px; /* ¡MÁS GRANDE! (antes 200px) */
    background-image: url('../sources/labflow-bot.png'); 
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center center;
    
    /* ¡ARREGLO! Posicionado más arriba */
    top: 50%; /* Ahora la centraremos verticalmente */
    left: 50%;
    transform: translate(-50%, -60%); /* Ajuste para centrar y subirla un poco */
    
    /* ¡ARREGLO! Mucho más visible en modo claro */
    opacity: 0.9; 
    filter: none; /* Sin filtro en modo claro */
    transition: all 0.3s ease;
}

/* Ondas de voz */
.voice-waves {
    position: absolute;
    bottom: 60px; /* Posicionado encima del footer */
    left: 0; right: 0;
    height: 60px; 
    background: 
        radial-gradient(ellipse at center, rgba(106, 90, 205, 0.3) 0%, transparent 70%) 0% 0% / 100% 100%,
        repeating-linear-gradient(90deg, #6a5acd 0px, #6a5acd 2px, transparent 2px, transparent 10px) 0% 0% / 100% 100%;
    background-size: 100% 100%, 200% 100%; 
    background-repeat: no-repeat, repeat-x;
    animation: wave-animation 4s linear infinite;
    opacity: 0; /* Por defecto invisible */
    transition: opacity 0.3s ease;
    z-index: 1;
}

/* --- Ajustes de visibilidad (Modo Claro) --- */
#chat-voice-btn.is-listening ~ .chat-background-elements .voice-waves {
    opacity: 1;
}
#chat-voice-btn.is-listening ~ .chat-background-elements .mascot-container {
    opacity: 1; /* Totalmente visible al escuchar */
}


body.dark-mode .mascot-container {
    /* ¡ARREGLO! Más visible en modo oscuro también */
    opacity: 0.4; /* Antes 0.2 */
    filter: saturate(0.8) brightness(1.2); /* Un poco más vibrante */
}
body.dark-mode #chat-voice-btn.is-listening ~ .chat-background-elements .mascot-container {
    opacity: 0.6; /* Un poco más visible al escuchar en oscuro */
    filter: saturate(1) brightness(1.2);
}

/* Animación de las ondas (Sin cambios) */
@keyframes wave-animation {
    0% { background-position: 0% 0%, 0% 0%; }
    100% { background-position: 0% 0%, 200% 0%; } 
}
/* =================================================== */
/* --- 10. ARREGLO DEL INDICADOR DE VOZ (FORZADO) --- */
/* =================================================== */

body.dark-mode #chatbot-indicator {
    /* ¡ARREGLO! Usamos !important para forzar que el fondo sea transparente */
    background-color: transparent !important; 
}

/* También ajustamos el logo (la bola que pulsa) para que se vea bien */
body.dark-mode .labflow-logo-indicator {
    background-color: rgba(255, 255, 255, 0.1); 
    border: 1px solid rgba(255, 255, 255, 0.2);
}
/* =================================================== */
/* --- 11. PANTALLA DE BIENVENIDA (SOLUCIÓN DEFINITIVA) --- */
/* =================================================== */

/* 1. El "Wrapper" 
   Le decimos que sea un contenedor flex que ocupe el espacio.
*/
.chat-content-wrapper {
    flex-grow: 1;
    position: relative; 
    min-height: 0; /* Arreglo de Flexbox */
    
    /* ¡NUEVO! Le decimos que sea un contenedor flex */
    display: flex;
    flex-direction: column;
}

/* 2. Pantalla de Bienvenida 
   La convertimos en un bloque flex que puede crecer.
*/
#chat-welcome-screen {
    /* position: absolute; BORRADO */
    
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    text-align: center;
    
    background-color: #fff; 
    
    /* ¡NUEVO! Le decimos que ocupe todo el espacio */
    flex-grow: 1;
    width: 100%;
    
    /* Transición (se anulará por .is-hidden, pero está bien) */
    opacity: 1;
    transition: opacity 0.3s ease-out;
}

/* 3. Área de Conversación
   También es un bloque flex que puede crecer.
*/
#chat-conversation-area {
    /* position: absolute; BORRADO */
    
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    min-height: 0; 
    width: 100%;
    
    opacity: 1;
    transition: opacity 0.3s ease-in;
}

/* 4. Clase de Transición (¡LA CLAVE!)
   Usamos display: none para que la pantalla oculta
   NO ocupe espacio en el layout.
*/
.is-hidden {
    display: none !important; /* ¡Esta es la corrección! */
}


/* 5. Estilos de los elementos de bienvenida */
.welcome-mascot {
    width: 200px; 
    height: 200px;
    object-fit: contain;
    margin-bottom: 20px;
}
#chat-welcome-screen h2 {
    font-size: 1.5em;
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
}
#chat-welcome-screen p {
    font-size: 1em;
    color: #666;
    max-width: 80%;
    margin-bottom: 25px;
}
#chat-start-btn {
    background-color: #6a5acd;
    color: #fff;
    border: none;
    border-radius: 25px; 
    padding: 12px 30px;
    font-size: 1em;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}
#chat-start-btn:hover {
    background-color: #5849a9;
    transform: scale(1.05);
}


/* --- 6. Modo Oscuro --- */
body.dark-mode #chat-welcome-screen {
    background-color: transparent; 
}
body.dark-mode #chat-welcome-screen h2 {
    color: #fff;
}
body.dark-mode #chat-welcome-screen p {
    color: #ccc;
}

/* =================================================== */
/* --- 21. ARREGLO PARA ALERTAS EN PÁGINA DE LOGIN --- */
/* =================================================== */

/* La página de login es oscura por defecto, pero no usa 'body.dark-mode'.
Forzamos a que las alertas SÍ usen los estilos de modo oscuro aquí.
*/

#login-page-body .alert-warning {
    color: #ffda6a; /* Texto amarillo claro */
    background-color: #4d3800; /* Fondo amarillo oscuro */
    border-color: #805b00;
}

#login-page-body .alert-danger {
    color: #f1b0b7; 
    background-color: #58151c; 
    border-color: #8c232e;
}

#login-page-body .alert-success {
    color: #a3cfbb; 
    background-color: #1a4233; 
    border-color: #2a684b;
}

#login-page-body .alert {
    /* Opcional: añade un borde morado para que resalte más */
    border: 1px solid #6a5acd; 
}